{% extends "base.html" %}
{% block title %}Korisnici{% endblock %}
{% block body %}
<div class="design-card p-4">
  <h1 class="h4 mb-3">Korisnici</h1>
  {% if users %}
  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead>
        <tr>
          <th>#</th>
          <th>Korisniƒçko ime</th>
          <th>Email</th>
          <th>Uloga</th>
          <th>Datum</th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ u.username or u.get('username') or u.get('_id') }}</td>
          <td>{{ u.email or u.get('email') }}</td>
          <td>
            {% set admin = u.is_admin if u is defined else (u.get('is_admin') if u.get is defined else False) %}
            <span class="badge {{ 'bg-success' if admin else 'bg-secondary' }}">{{ 'Admin' if admin else 'Korisnik' }}</span>
          </td>
          <td>
            {% set d = u.created_at or u.get('created_at') %}
            {% if d %}{{ d.strftime('%d.%m.%Y') if d.strftime is defined else d }}{% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="alert alert-info">Nema korisnika za prikaz.</div>
  {% endif %}
</div>
{% endblock %}